input_str = """............
........0...
.....0......
.......0....
....0.......
......A.....
............
............
........A...
.........A..
............
............"""

input_str = """.....8............1r.....a....................O...
.a..............4..q.........................0...9
....a.........8...................................
.................D.....................V0.........
.....d............................................
.r..........q....................................O
..................q...........................9...
..............D..............X..................V.
........D................X.................0......
.........8............X...........................
....................J....................9..0.....
..a..B............r..W........J...............R..Q
......WD...q.....1..........Q..............R..V...
.1W...................u...........................
..............................u.............R.....
....B..............d..c..................R........
.............J..............X............V........
......1...........................3...............
......B...........d...................3...........
............8..J.......u.....3....................
...........4.............6........................
.....4v.............d.......................O.....
..........................v.2.....................
.............................................s....
..................4...M..W..................s.....
......................m...........................
...........M......................................
..b..................c............................
....................Co..........KQ.......O.s......
.................C............................s...
.......x............c............................3
........o......A....U.....Q.........5.............
...............U..................j...5...........
.....K.......U................j..........2........
.......A.v.....w.....................c...5........
..K....................................j..........
...............K.yk....B.............2............
......C....b..............x...........Y...........
.....mA..C......U.................................
........M.....A.....................2..6...5......
.............................7.......Y............
.m.M......w..v....................................
............m...........x.....Y...................
....................k....w........................
......b.....w..S....7.............................
..............S..............x...........Y........
....................S...6.........................
.y...............S..........7.6.................9.
o..........k...............b......................
yo...........k...................................."""

# pip install pandas

import pandas as pd
input_df = pd.DataFrame([list(line) for line in input_str.split('\n')])

freq_dict = {}
for i in range(len(input_df)):
    for j in range(len(input_df.columns)):
        value = input_df.iloc[i,j]
        if value not in ['.']:
            if value in freq_dict:
                freq_dict[value].append((i,j))
            else:
                freq_dict[value] = [(i,j)]
freq_dict

antinode_set = set()
all_antennas = sum(freq_dict.values(), [])
for key in freq_dict:
    for i in freq_dict[key]:
        for j in freq_dict[key]:
            if i == j:
                pass
            else:
                dx = j[0]-i[0]
                dy = j[1]-i[1]
                n=1
                while 0 <= i[0]-n*dx < len(input_df.columns) and 0 <= i[1]-n*dy < len(input_df):
                    antinode_set.add((i[0]-n*dx,i[1]-n*dy))
                    n += 1
                
                dx = j[0]-i[0]
                dy = j[1]-i[1]
                n=1
                while 0 <= j[0]+n*dx < len(input_df.columns) and 0 <= j[1]+n*dy < len(input_df):
                    antinode_set.add((j[0]+n*dx,j[1]+n*dy))
                    n += 1
        
        antinode_set.add(i)

len(antinode_set), antinode_set
